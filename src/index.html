<!DOCTYPE html>
<html>

    <head>

        <title>Neighborhood Map Project</title>
        <meta name="viewport" content="initial-scale=1.0">
        <meta charset="utf-8">

        <link rel="stylesheet" href="css/styles.css">

    </head>

    <body>

        <div id="map"></div>
        <div id="sidebar">
            <input data-bind="event: { keyup: searchInput }" id="search-bar" placeholder="Filter...">
            <ul data-bind="foreach: locations">
                <li data-bind="text: $data, event: { mouseover: $root.locationMouseover, mouseout: $root.locationMouseout, click: $root.locationClick }"></li>
            </ul>
        </div>
        <div id="toggle-sidebar"><span id="toggle-arrow">&gt;</span></div>

        <script src="http://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js"></script>
        <script src="http://code.jquery.com/jquery-2.2.4.min.js"></script>

        <script src="js/models.js"></script>
        <script src="js/app.js"></script>
        <script src="js/functions.js"></script>
        <script async defer src="http://maps.googleapis.com/maps/api/js?key=AIzaSyB_RY_IW-J2SdJP-zBpnVQDwV4HFR_ZRzk&libraries=places&callback=initMap"></script>
        <script>
            var map;
            var bounds;
            var service;

            document.getElementById("toggle-sidebar").addEventListener("click", toggleSidebar);

            function initMap() {
                var beijing = new google.maps.LatLng(39.8634084, 116.3807053);
                bounds = new google.maps.LatLngBounds();

                map = new google.maps.Map(document.getElementById("map"), {
                    center: new google.maps.LatLng(0, 0),
                    zoom: 8
                });

                service = new google.maps.places.PlacesService(map);

                locations.forEach(function(query, index){
                    (function(index){
                        service.textSearch({
                            location: map.center,
                            query: query.name
                        }, function(results, status){
                            addLocations.call(this, results, status, index);
                        });
                    })(index);
                });
            }
        </script>

    </body>

</html>
